// Generated by CoffeeScript 1.7.0
(function() {
  var Roots, path;

  path = require('path');

  Roots = require('../');

  module.exports = function(args, cli) {
    var k, name, proj_path, tpl_name;
    name = args._[1];
    if (!name) {
      return cli.emit('err', 'missing project name'.red);
    }
    proj_path = path.join(args._[2] || process.cwd(), name);
    for (k in args) {
      if (k !== '_' && k !== '$0') {
        tpl_name = k;
      }
    }
    return Roots["new"]({
      name: name,
      path: proj_path,
      template: tpl_name
    }).on('template:created', function() {
      cli.emit('data', ("new project created at " + (proj_path.replace(process.cwd(), '').slice(1))).green);
      return cli.emit('data', ("(using " + (tpl_name || 'base') + " template)").grey);
    }).on('deps:installing', function() {
      return cli.emit('data', '\ninstalling dependencies... '.grey);
    }).on('deps:finished', function() {
      return cli.emit('data', 'done!\n'.green);
    }).on('error', cli.emit.bind(cli, 'err'));
  };

}).call(this);
